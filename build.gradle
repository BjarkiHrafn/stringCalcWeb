apply plugin: 'java-library'
apply plugin: 'application'

mainClassName = "is.ru.hugb.calc.CalcWeb"

repositories {
    jcenter()
}

dependencies {
    // Dependencies
    compile 'com.sparkjava:spark-core:2.6.0'

    // Test dependencies
    testImplementation 'junit:junit:4.12'
	
	compile 'com.github.jsimone:webapp-runner:8.5.11.3'
}

task stage() {
    dependsOn clean, war
}
war.mustRunAfter clean

task copyToLib(type: Copy) {
    into "$buildDir/server"
    from(configurations.compile) {
        include "webapp-runner*"
    }
}

stage.dependsOn(copyToLib)

